#pragma checksum "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d467a2c72aa39922221aa0e563094feb61923e78"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Pages_Proforma_Registrar), @"mvc.1.0.razor-page", @"/Pages/Proforma/Registrar.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\_ViewImports.cshtml"
using DevExtremeAspNetCoreResponsiveApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\_ViewImports.cshtml"
using DevExtreme.AspNet.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\_ViewImports.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\_ViewImports.cshtml"
using Data.Model;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\_ViewImports.cshtml"
using DevExtremeAspNetCoreResponsiveApp.DTOs;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"d467a2c72aa39922221aa0e563094feb61923e78", @"/Pages/Proforma/Registrar.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9ccded478ea879bcdad98436fdc08a5ed888fec9", @"/Pages/_ViewImports.cshtml")]
    public class Pages_Proforma_Registrar : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("type", "hidden", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("name", "IdProforma", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.InputTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 3 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
  
    ViewData["Title"] = "Proformas";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"row\">\r\n    <div class=\"col-md-1\"></div>\r\n    <div class=\"col-md-10\">\r\n");
#nullable restore
#line 10 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
         using (Html.BeginForm(method: FormMethod.Post))
        {

#line default
#line hidden
#nullable disable
            WriteLiteral("            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("input", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "d467a2c72aa39922221aa0e563094feb61923e785043", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.InputTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper.InputTypeName = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
#nullable restore
#line 12 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper.For = ModelExpressionProvider.CreateModelExpression(ViewData, __model => __model.proforma.IdProforma);

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-for", __Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper.For, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            __Microsoft_AspNetCore_Mvc_TagHelpers_InputTagHelper.Name = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 13 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
        Write(Html.DevExtreme().Form<Proformas>()
            .ID("form")
            .FormData(Model.proforma)
            .LabelLocation(FormLabelLocation.Left)
            .MinColWidth(300)
            .ColCount(4)
            .Height("50%")
            .ReadOnly(false)
            .ShowColonAfterLabel(true)
            .ShowValidationSummary(true)
            //.Disabled(new JS("disableForm"))
            .Items(item =>{
               item.AddGroup().ColSpan(4).ColCount(6).Items(i => {
                   i.AddButton().Name("Guardar").ColSpan(1).ButtonOptions(o=>o.Icon("save").Text("Guardar").Type(ButtonType.Success).UseSubmitBehavior(true).Width("100%"));

                   i.AddButton().Name("Nuevo").ColSpan(1).ButtonOptions(o=>o.Icon("fa fa-file-o").Text("Nuevo").Type(ButtonType.Success).Width("100%").OnClick(
                       item => new global::Microsoft.AspNetCore.Mvc.Razor.HelperResult(async(__razor_template_writer) => {
    PushWriter(__razor_template_writer);
    WriteLiteral("\r\n                           function(e)\r\n                           {\r\n                               window.location.href=\"/Proforma/Registrar/?p=\" + 0 ;\r\n                           }\r\n                       ");
    PopWriter();
}
)
                   ));
                   i.AddButton().Name("Cancelar").ColSpan(1).ButtonOptions(o=>o.Icon("").Text("Cancelar").Type(ButtonType.Success).Width("100%").OnClick(
                       item => new global::Microsoft.AspNetCore.Mvc.Razor.HelperResult(async(__razor_template_writer) => {
    PushWriter(__razor_template_writer);
    WriteLiteral("\r\n                           function(e)\r\n                           {\r\n                               window.location.reload();\r\n                           }\r\n                       ");
    PopWriter();
}
)
                   ));
                    i.AddButton().Name("Imprimir").ColSpan(1).ButtonOptions(o=>o.Icon("print").Text("Imprimir").Type(ButtonType.Success).Width("100%").OnClick("print"                      
                   ));
                   i.AddButton().Name("Listado").ColSpan(1).ButtonOptions(o => o.Icon("fa fa-list").Type(ButtonType.Success).Width("50px").OnClick("showList"));
               });
                /*item.AddButton().Name("Guardar").ButtonOptions(o => o.Icon("save").Text("Guardar").Type(ButtonType.Success).UseSubmitBehavior(true));*/
                //item.AddSimpleFor(m => m.IdProforma).Visible(false);
                item.AddGroup().ColSpan(4).ColCount(4).Caption("Datos del Cliente").Items(item =>
                {
                    //item.AddSimpleFor(m => m.IdProforma).Visible(false);
                    item.AddSimpleFor(m => m.Nombre).ColSpan(4).Editor(e => e.TextBox().StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Domicilio).ColSpan(4).Editor(e => e.TextBox().StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Telefono).ColSpan(2).Editor(e => e.TextBox().StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Email).ColSpan(2).Editor(e => e.TextBox().StylingMode(EditorStylingMode.Outlined));
                });

                item.AddGroup().ColSpan(4).ColCount(4).Caption("Datos del Lote").Items(item =>
                {
                    item.AddSimpleFor(m => m.Proyecto).ColSpan(2).Label(l => l.Text("Proyecto")).Editor(e => e.SelectBox().DataSource(d => d.Mvc().Controller("Ubicaciones").LoadAction("GetAll").Key("Proyecto"))
                .SearchExpr("Proyecto").SearchMode(DropDownSearchMode.Contains).DisplayExpr("Proyecto").ValueExpr("Proyecto").SearchEnabled(true).SearchMode(DropDownSearchMode.Contains).StylingMode(EditorStylingMode.Outlined)
                );
                    item.AddSimpleFor(m => m.Lote).ColSpan(1).Editor(e => e.TextBox().StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Area).Label(c=>c.Text("Area(Vrs²)")).ColSpan(1).Editor(e => e.NumberBox().Min(1).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.PrecioVara).Label(c => c.Text("Precio por Vr²")).ColSpan(2).Editor(e => e.NumberBox().Min(1).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Total).ColSpan(1).Editor(e => e.NumberBox().ReadOnly(true).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Prima).ColSpan(1).Editor(e => e.NumberBox().StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Financiar).ColSpan(1).Editor(e => e.NumberBox().ReadOnly(true).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Plazo).ColSpan(1).Editor(e => e.NumberBox().StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Interes).ColSpan(1).Editor(e => e.NumberBox().Min(1).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.Cuota).ColSpan(1).Editor(e => e.NumberBox().ReadOnly(true).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.InteresAcumulado).ColSpan(1).Editor(e => e.NumberBox().ReadOnly(true).StylingMode(EditorStylingMode.Outlined));
                    item.AddSimpleFor(m => m.TotalApagar).ColSpan(1).Editor(e => e.NumberBox().ReadOnly(true).StylingMode(EditorStylingMode.Outlined));
                });

            }).OnInitialized("onFormInitialized").OnContentReady("onFormReady")
        );

#line default
#line hidden
#nullable disable
#nullable restore
#line 78 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
         
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("    </div>\r\n    <div class=\"col-md-1\"></div>\r\n</div>\r\n\r\n");
#nullable restore
#line 84 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
Write(Html.DevExtreme().Popup
            ()
            .ID("PopProformas")
            .Height(600)
            .Position(PositionAlignment.Center)
            .Width(950)
            .Title("Proformas registradas")
            .ShowCloseButton(true)
            .ContentTemplate(item => new global::Microsoft.AspNetCore.Mvc.Razor.HelperResult(async(__razor_template_writer) => {
    PushWriter(__razor_template_writer);
    WriteLiteral("\r\n                ");
#nullable restore
#line 93 "D:\Repository\rmlarios\PayLotsClientAPI\DevExtremeAspNetCoreResponsiveApp\Pages\Proforma\Registrar.cshtml"
            Write(Html.DevExtreme().DataGrid<Proformas>().ID("gridProformas").Height(500)
                                            .DataSource(d=>d.Mvc().Controller("Proformas").Key("IdProforma")
                                            .LoadAction("GetAll")
                                            )
                                            .RemoteOperations(r=>r.Paging(true))
                                            .Columns(c =>                                            {
                                                c.AddFor(m => m.Nombre);
                                                c.AddFor(m => m.Proyecto);
                                                c.AddFor(m => m.Lote);
                                                c.AddFor(m => m.Area);
                                                c.AddFor(m => m.PrecioVara);
                                                c.AddFor(m => m.Total);
                                            })
                                            .NoDataText("No hay Datos que mostrar")
                                            .Editing(c=>c.AllowUpdating(true).UseIcons(true))
                                            .OnEditingStart("startEdit")
                                            .ShowBorders(false)
                    .ElementAttr(new { @class = "dx-card wide-card" })
                    .Paging(pag => pag.PageSize(4))
                    .Pager(p => p.ShowPageSizeSelector(false).ShowNavigationButtons(true).ShowInfo(true).InfoText("Página {0} de {1} ({2} Registros)"))
                    .RowAlternationEnabled(true)
                    .HoverStateEnabled(true)
                    .Selection(s => s.Mode(SelectionMode.Single).AllowSelectAll(false))
                    .SearchPanel(s => s.Visible(true).HighlightSearchText(true).Width(400))
                    .WordWrapEnabled(true)
                    .ColumnAutoWidth(true)
                );

#line default
#line hidden
#nullable disable
    WriteLiteral("\r\n            ");
    PopWriter();
}
))
            .Visible(false).CloseOnOutsideClick(true).Position(PositionAlignment.Center)

);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"


<script>
    var vform, isFirstLoad = true;
    function onFormInitialized(e) {
        vform = e.component;
    }

    function onFormReady(e) {
        if (isFirstLoad) {
            var estado = vform.option(""formData"").IdProforma;
            if (estado == 0)                 
                vform.getEditor(""Imprimir"").option(""disabled"", true);
            else
                vform.getEditor(""Imprimir"").option(""disabled"", false);


            var queryParams = new URLSearchParams(window.location.search);
            //IdProforma = vform.getEditor(""IdProforma"").option(""value"");
            IdProforma = vform.option(""formData"").IdProforma;
            queryParams.set(""p"", IdProforma);
            // Replace current querystring with the new one.
            history.replaceState(null, null, ""?"" + queryParams.toString());
            //alert(queryParams);
        }
    }


    function showList() {
        var popup = $(""#PopProformas"").dxPopup(""instance"");
        popup.sho");
            WriteLiteral(@"w();
    }

    function startEdit(e) {
        e.cancel = true;
        var idproforma = e.data.IdProforma;
        window.location.href = ""/Proforma/Registrar/?p="" + idproforma;
    }

    function print(e) {
        idproforma = vform.option(""formData"").IdProforma;        
        window.open('/Reportes/Viewer?r=pro&p=' + idproforma, '_newtab');        
    }


</script>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<DevExtremeAspNetCoreResponsiveApp.Pages.Proforma.RegistrarModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<DevExtremeAspNetCoreResponsiveApp.Pages.Proforma.RegistrarModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<DevExtremeAspNetCoreResponsiveApp.Pages.Proforma.RegistrarModel>)PageContext?.ViewData;
        public DevExtremeAspNetCoreResponsiveApp.Pages.Proforma.RegistrarModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
